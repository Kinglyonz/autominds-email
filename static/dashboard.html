<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AutoMinds — Command Center</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/static/dashboard.css">
</head>
<body>
<canvas id="bg-canvas"></canvas>

<div class="app-shell">
<!-- Sidebar -->
<aside class="sidebar">
    <div class="brand">
        <div class="brand-logo"><span>A</span></div>
        <div>
            <div class="brand-text">AutoMinds</div>
            <div class="brand-tag">Command Center</div>
        </div>
    </div>

    <div class="nav-label">Your AMIs</div>
    <nav id="ami-nav">
        <div class="nav-item active" data-panel="cortex" onclick="switchPanel('cortex')">
            <div class="nav-icon cortex"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg></div>
            <div><div class="nav-name">Cortex</div><div class="nav-sub">Knowledge Engine</div></div>
            <span class="badge badge-live">Live</span>
        </div>
        <div class="nav-item" data-panel="inbox" onclick="switchPanel('inbox')">
            <div class="nav-icon inbox"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#22C55E" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 7l-10 7L2 7"/></svg></div>
            <div><div class="nav-name">Inbox Pilot</div><div class="nav-sub">Email Intelligence</div></div>
            <span class="badge badge-live">Live</span>
        </div>
        <div class="nav-item" data-panel="echo" onclick="switchPanel('echo')">
            <div class="nav-icon echo"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#A855F7" stroke-width="2"><path d="M12 3a9 9 0 019 9 9 9 0 01-9 9"/><path d="M12 7a5 5 0 015 5 5 5 0 01-5 5"/><circle cx="12" cy="12" r="1"/></svg></div>
            <div><div class="nav-name">Echo</div><div class="nav-sub">Digital Clone</div></div>
            <span class="badge badge-soon">Soon</span>
        </div>
    </nav>

    <div class="sidebar-bottom">
        <div class="user-row">
            <div class="user-avatar" id="user-avatar">?</div>
            <div>
                <div class="user-name" id="user-display-name">—</div>
                <div class="user-email" id="user-display-email">—</div>
            </div>
        </div>
        <button class="sign-out" onclick="logout()">Sign Out</button>
    </div>
</aside>

<!-- Main -->
<main class="main">
    <!-- Top Bar -->
    <header class="topbar">
        <div class="topbar-left">
            <div class="topbar-icon" id="topbar-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#3B82F6" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg></div>
            <div>
                <h1 class="topbar-title" id="topbar-title">Cortex</h1>
                <p class="topbar-sub" id="topbar-sub">Chat with your documents. Powered by RAG.</p>
            </div>
        </div>
        <div class="status-pill"><span class="pulse-dot"></span>Online</div>
    </header>

    <!-- Panel: Cortex -->
    <div id="panel-cortex" class="panel">
        <div class="index-bar">
            <input id="folder-id-input" type="text" placeholder="Paste Google Drive Folder ID to index..." class="input-field">
            <button onclick="indexDocuments()" id="index-btn" class="btn-glow">Index</button>
            <span id="index-status" class="idx-status"></span>
        </div>
        <div id="chat-messages" class="chat-area">
            <div class="msg msg-ai">
                <div class="msg-header"><span class="msg-label ai-label">⚡ Cortex</span></div>
                <div class="msg-body">Welcome to <strong>Cortex</strong> — your knowledge engine.<br><br>1. Paste a <strong>Google Drive Folder ID</strong> above and click <strong>Index</strong>.<br>2. Once indexed, ask me anything below.<br><br>I'll search your knowledge base and answer with full context.</div>
            </div>
        </div>
        <div class="chat-bar">
            <div class="chat-input-wrap">
                <input id="chat-input" type="text" placeholder="Ask Cortex a question..." class="chat-input" onkeydown="if(event.key==='Enter')sendMessage()">
                <button class="send-btn" onclick="sendMessage()"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></button>
            </div>
        </div>
    </div>

    <!-- Panel: Inbox Pilot -->
    <div id="panel-inbox" class="panel hidden">
        <div class="center-panel">
            <div class="feature-card inbox-glow">
                <div class="card-icon inbox-icon"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#22C55E" stroke-width="1.5"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 7l-10 7L2 7"/></svg></div>
                <h3>Inbox Pilot</h3>
                <p>Your email intelligence runs in the background — scanning, sorting, and summarizing your inbox automatically.</p>
                <div class="tags">
                    <span class="tag tag-green">Smart Sorting</span>
                    <span class="tag tag-green">Auto-Draft</span>
                    <span class="tag tag-green">Daily Briefing</span>
                    <span class="tag tag-green">Priority Detection</span>
                </div>
                <a href="/briefing?user_id=" id="briefing-link" class="btn-glow green">View Latest Briefing</a>
            </div>
        </div>
    </div>

    <!-- Panel: Echo -->
    <div id="panel-echo" class="panel hidden">
        <div class="center-panel">
            <div class="feature-card echo-glow">
                <div class="card-icon echo-icon"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#A855F7" stroke-width="1.5"><path d="M12 3a9 9 0 019 9 9 9 0 01-9 9"/><path d="M12 7a5 5 0 015 5 5 5 0 01-5 5"/><circle cx="12" cy="12" r="1"/></svg></div>
                <h3>Echo</h3>
                <p>Your digital clone — trained on your writing style, knowledge, and preferences. Echo responds like you.</p>
                <div class="tags">
                    <span class="tag tag-purple">Persona Engine</span>
                    <span class="tag tag-purple">Voice Matching</span>
                    <span class="tag tag-purple">Context Memory</span>
                    <span class="tag tag-purple">Multi-Channel</span>
                </div>
                <div class="coming-badge">◆ Coming Soon</div>
            </div>
        </div>
    </div>
</main>
</div>

<script src="/static/dashboard.js"></script>
</body>
</html>
